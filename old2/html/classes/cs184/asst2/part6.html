<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<style>  
    div.padded {  
      padding-top: 0px;  
      padding-right: 100px;  
      padding-bottom: 0.25in;  
      padding-left: 100px;  
    }  
  </style> 
<title>Hugh Chen  |  CS 184</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="style.css" media="screen" />
</head>
<body>
<br />
<h1 align="middle"><a href="index.html">Assignment 2: Rasterizester</a></h1>
    <h2 align="middle">Hugh Chen - cs184-en</h2>

    <div class="padded">

    <h2 align="middle">Part 6: Fun with Shaders</h2>
        <p>In part 6, we implement the fragment shader's main function in GLSL.  The fragment shader shades on a per-pixel basis, and computes the rgb color to be assigned after being linked into the program object.  Some of the relevant vectors:</p>
        <div align="middle">
            <img src="images/part6/shading_vectors.jpg" width="400px" />
            <figcaption align="middle">Visualization of relevant vectors.  Image taken from <a href="http://cs184.eecs.berkeley.edu/cs184_sp16/lecture/pipeline/slide_020">here</a>.</figcaption>
        </div>

        <p>Initially, the diffuse shader was implemented, which shaded based on the eye position:</p>

        <div align="middle">
            <img src="images/part6/teapot_1.png" width="400px" />
            <figcaption align="middle">Diffuse teapot.</figcaption>
        </div>

        <p>The first thing I implemented was the Blinn-Phong shader.  This pretty much comprised of taking the <code>normal</code>, the <code>vertex</code>, and the <code>lightPos</code> and finding these normalized vectors:</p>

        <xmp>
            vec3 n = normalize(normal);
            vec3 h = normalize(vertex + lightPos);
        </xmp>

        <p>Then we output a color proportional to:</p>

        <xmp>
            float p = pow(max(dot(n, h), 0.0), p);
        </xmp>

        <p>Where <code>p</code> can be tuned.</p>

        <div align="middle">
            <img src="images/part6/teapot_2.png" width="400px" />
            <figcaption align="middle">Blinn-Phong shading.  <b>Deliverable</b>.</figcaption>
        </div>

        <div align="middle">
            <img src="images/part6/teapot_3.png" width="400px" />
            <figcaption align="middle">Blinn-Phong shading summed with diffuse shading.  <b>Deliverable</b>.</figcaption>
        </div>

        <p>For the next part I implemented the environment mapping.  This is basically a matter of calculating reflection vectors to index into the environment mapping.  First we calculate the reflection vector:</p>

        <xmp>
            vec3 n = normalize(normal);
            vec3 i = normalize(eyePos - vertex);
            vec3 o = 2.0 * dot(i, n) * n - i;            
        </xmp>

        <p>Then we calculate the spherical coordinates to index into the environment map according to:</p>

        <xmp>
            float phi = acos(o.z / sqrt(o.x * o.x + o.y * o.y + o.z * o.z));
            float theta = atan(o.y / o.x);
        </xmp>

        <p>After this, we map into the provided environment map and get the resulting teapot:</p>

        <div align="middle">
            <img src="images/part6/teapot_4.png" width="400px" />
            <figcaption align="middle">Environment mapping.  <b>Deliverable</b>.</figcaption>
        </div>

        <p><b>Extra Credit</b>:  Here, I implemented diffuse from light (since we only had diffuse from eye pre-implemented), which consisted of using the dot product between the light position and the normal vector <code>max(dot(out_vec, n), 0.0)</code>.  My resulting images were:</p>

        <div align="middle">
            <img src="images/part6/cow_1.png" width="400px" />
            <figcaption align="middle">Diffuse from light.</figcaption>
        </div>

        <div align="middle">
            <img src="images/part6/cow_2.png" width="400px" />
            <figcaption align="middle">Another angle.</figcaption>
        </div>

        <p><b>Extra Credit</b>:  Here, I implemented a way to peek into the environment map.  I implemented it by mapping based on the spherical coordinates generated by the eye position vector.  My resulting images were:</p>

        <div align="middle">
            <img src="images/part6/cow_3.png" width="400px" />
            <figcaption align="middle">Eye position map into environment.</figcaption>
        </div>

        <div align="middle">
            <img src="images/part6/cow_4.png" width="400px" />
            <figcaption align="middle">Another angle.</figcaption>
        </div>


    <h1 align="middle"><a href="index.html">Assignment 2: Rasterizester</a></h1>

</div>
</body>
</html>