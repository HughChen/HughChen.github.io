<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<style>  
    div.padded {  
      padding-top: 0px;  
      padding-right: 100px;  
      padding-bottom: 0.25in;  
      padding-left: 100px;  
    }  
  </style> 
<title>Hugh Chen  |  CS 184</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="style.css" media="screen" />
</head>
<body>
<br />
<h1 align="middle"><a href="index.html">Assignment 4: Lens Simulator</a></h1>
    <h2 align="middle">Hugh Chen - cs184-en</h2>

    <div class="padded">

    <h2 align="middle">Part 2: Contrast-based Autofocus</h2>

      <p><b>Document your focus metric, including both the formula you used and an intuitive explanation of why it corresponds to a measure of how in-focus an image is.</b></p>

      <p>My focus metric was the variance of the image buffer.  In order to treat each channel with equal weight, I split them all up and found each ones mean <code>cmean</code>.  Then I calculated the mean of the square of the deviation from <code>cmean</code>, which is the variance for a particular channel.  Finally, I average across all four variance values for my final focus metric.  Variance serves as a good measure of focus, because it helps to detect contrast.  If an area of an image has more variability among it's pixels, it stands to reason that the focus is becoming better and the disparity across the contrasting regions is becoming better defined.</p>

      <p><b>Explain your autofocus heuristic.</b></p>
      
      <p>My autofocus heuristic is currently a straightforward linear search from <code>infinity_focus</code> to <code>near_focus</code>.  The step size is calculated based off <code>sqrt(36*36 + 24*24) / sqrt(screenW*screenW + screenH*screenH)</code>, in order to minimize the size of the circle of confusion.</p>
      
      <p><b>For one scene of your choice and one small render cell, turn up the settings to high quality (at least 16spp and 16splight and 100bounce) and plot the value of your focus metric versus sensor depth for all sensor depths tested in your autofocus function. You should be able to see the global max at the point where the image is most well focused.</b></p>

      <div align="middle">
          <img src="images/part2/autofocus.png" width="600px" />
          <figcaption align="middle">Autofocus plot of small area of CBdragon in lens 1.</figcaption>
      </div>

      <div align="middle">
          <img src="images/part2/CBdragon_64_1_100_af_lens1.png" width="600px" />
          <figcaption align="middle">Rendering using best focus.</figcaption>
      </div>

      <p><b>Pick one scene to concentrate on. Render this scene in high quality (1024spp, 1splight, 100bounce) for a striking view with interesting focus for all four lenses (you can choose different perspectives and points of focus for each lens to highlight their different attributes).</b></p>

      <div align="middle">
          <img src="images/part2/CBdragon_1024_1_100_lens1.png" width="600px" />
          <figcaption align="middle">CBdragon lens 1 screenshot with 1024spp, 1splight, 100bounce.</figcaption>
      </div>

      <div align="middle">
          <img src="images/part2/CBdragon_1024_1_100_lens2.png" width="600px" />
          <figcaption align="middle">Lenstester lens 2 screenshot with 1024spp, 1splight, 100bounce.</figcaption>
      </div>

      <div align="middle">
          <img src="images/part2/CBdragon_1024_1_100_lens3.png" width="600px" />
          <figcaption align="middle">Lenstester lens 3 screenshot with 1024spp, 1splight, 100bounce.</figcaption>
      </div>

      <div align="middle">
          <img src="images/part2/CBdragon_1024_1_100_lens4.png" width="600px" />
          <figcaption align="middle">Lenstester lens 4 screenshot with 1024spp, 1splight, 100bounce.</figcaption>
      </div>

    <h1 align="middle"><a href="index.html">Assignment 3: PathTracer</a></h1>

</div>
</body>
</html>




